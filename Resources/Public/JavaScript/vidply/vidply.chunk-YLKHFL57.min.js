/*!
 * Universal, Accessible Video Player
 * (c) 2026 Matthias Peltzer
 * Released under GPL-2.0-or-later License
 */
var e={createElement(e,t={}){const a=document.createElement(e);if(t.className&&(a.className=t.className),t.attributes)for(const[e,s]of Object.entries(t.attributes))a.setAttribute(e,s);if(t.innerHTML&&(a.innerHTML=t.innerHTML),t.textContent&&(a.textContent=t.textContent),t.style&&Object.assign(a.style,t.style),t.children)for(const e of t.children)e&&a.appendChild(e);return a},show(e){e?.style&&(e.style.display="")},hide(e){e?.style&&(e.style.display="none")},fadeIn(e,t=300,a){if(e&&(e.style.opacity="0",e.style.display="",e.style.transition=`opacity ${t}ms ease`,e.style.opacity="1",a)){const s=()=>{e.removeEventListener("transitionend",s),a()};e.addEventListener("transitionend",s,{once:!0}),setTimeout(s,t+50)}},fadeOut(e,t=300,a){if(!e)return;e.style.transition=`opacity ${t}ms ease`,e.style.opacity="0";const s=()=>{e.removeEventListener("transitionend",s),e.style.display="none",a&&a()};e.addEventListener("transitionend",s,{once:!0}),setTimeout(s,t+50)},offset(e){if(!e)return{top:0,left:0,width:0,height:0};const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}},escapeHTML(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,e=>t[e])},sanitizeHTML(e){const t=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/on\w+\s*=/gi,"").replace(/javascript:/gi,""),a=document.createElement("div");return a.innerHTML=t,a.innerHTML},createTooltip(e,t="vidply"){return this.createElement("span",{className:`${t}-tooltip`,textContent:e,attributes:{"aria-hidden":"true"}})},attachTooltip(e,t,a="vidply"){if(!e||!t)return;e.querySelector(`.${a}-tooltip`)?.remove();const s=this.createTooltip(t,a);e.appendChild(s);const i=`${a}-tooltip-visible`,r=()=>s.classList.add(i),o=()=>s.classList.remove(i);e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",o),e.addEventListener("focus",r),e.addEventListener("blur",o)},createButtonText(e,t="vidply"){return this.createElement("span",{className:`${t}-button-text`,textContent:e,attributes:{"aria-hidden":"true"}})},addClass(e,t){e?.classList?.add(t)},removeClass(e,t){e?.classList?.remove(t)},toggleClass(e,t){e?.classList?.toggle(t)},hasClass(e,t){return e?.classList?.contains(t)??!1}},t={player:{label:"Video Player",play:"Play",pause:"Pause",stop:"Stop",restart:"Restart from beginning",rewind:"Rewind",forward:"Forward",rewindSeconds:"Rewind {seconds} seconds",forwardSeconds:"Forward {seconds} seconds",previous:"Previous track",next:"Next track",playlist:"Toggle playlist",volume:"Volume",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen",exitFullscreen:"Exit Fullscreen",captions:"Captions",chapters:"Chapters",quality:"Quality",captionStyling:"Caption styling",transcript:"Toggle transcript",audioDescription:"Audio description",signLanguage:"Sign language video",settings:"Settings",speed:"Playback Speed",pip:"Picture in Picture",currentTime:"Current time",duration:"Duration",progress:"Progress",seekForward:"Seek forward {seconds} seconds",seekBackward:"Seek backward {seconds} seconds",volumeUp:"Volume up",volumeDown:"Volume down",loading:"Loading...",loadingChapters:"Loading chapters...",error:"Error loading media",buffering:"Buffering...",signLanguageVideo:"Sign Language Video",closeSignLanguage:"Close sign language video",signLanguageSettings:"Sign language settings",startPlaybackFirst:"Please start playback first.",startPlaybackForAudioDescription:"Please start playback first to use audio description.",startPlaybackForSignLanguage:"Please start playback first to use sign language video.",noChapters:"No chapters available",noCaptions:"No captions available",auto:"Auto",autoQuality:"Auto (no quality selection available)",noQuality:"Quality selection not available",signLanguageDragResize:"Sign Language Video - Press D to drag with keyboard, R to resize",signLanguageDragActive:"Sign Language Video - Drag mode active. Use arrow keys to move, Escape to exit.",signLanguageResizeActive:"Sign Language Video - Resize mode active. Use left/right arrow keys to resize, Escape to exit.",enableSignDragMode:"Enable drag mode. Shortcut: D key",disableSignDragMode:"Disable drag mode. Shortcut: D key",enableSignDragModeAria:"Enable toggle keyboard drag mode with arrow keys. Shortcut: D key",disableSignDragModeAria:"Disable toggle keyboard drag mode with arrow keys. Shortcut: D key",enableSignResizeMode:"Enable resize mode. Shortcut: R key",disableSignResizeMode:"Disable resize mode. Shortcut: R key",enableSignResizeModeAria:"Enable keyboard resize mode with arrow keys. Shortcut: R key",disableSignResizeModeAria:"Disable keyboard resize mode with arrow keys. Shortcut: R key",resizeHandle:"Resize {direction} corner",moreOptions:"More options",noMoreOptions:"No additional options available"},captions:{off:"Off",select:"Select captions",fontSize:"Font Size",fontFamily:"Font Family",color:"Text Color",backgroundColor:"Background Color",opacity:"Opacity"},fontSizes:{small:"Small",normal:"Normal",large:"Large",xlarge:"X-Large"},fontFamilies:{sansSerif:"Sans-serif",serif:"Serif",monospace:"Monospace"},styleLabels:{textColor:"Text Color",background:"Background",font:"Font",fontSize:"Font Size",opacity:"Opacity"},audioDescription:{enable:"Enable audio description",disable:"Disable audio description"},signLanguage:{show:"Show sign language video",hide:"Hide sign language video",showInMainView:"Show sign language in main video",hideInMainView:"Hide sign language from main video"},transcript:{title:"Transcript",ariaLabel:"Video Transcript",close:"Close transcript",loading:"Loading transcript...",noTranscript:"No transcript available for this video.",settings:"Transcript settings. Press Enter to open menu, or D to enable drag mode",keyboardDragMode:"Toggle keyboard drag mode with arrow keys. Shortcut: D key",keyboardDragActive:"⌨️ Keyboard Drag Mode Active (Arrow keys to move, Shift+Arrows for large steps, D or ESC to exit)",dragResizePrompt:"Press D to drag or R to resize. Use Home to reset position, Esc to close.",dragModeEnabled:"Keyboard drag mode enabled. Use arrow keys to move, Shift+Arrow for larger steps. Press D or Esc to exit.",dragModeDisabled:"Keyboard drag mode disabled.",enableDragMode:"Enable drag mode. Shortcut: D key",disableDragMode:"Disable drag mode. Shortcut: D key",enableDragModeAria:"Enable toggle keyboard drag mode with arrow keys. Shortcut: D key",disableDragModeAria:"Disable toggle keyboard drag mode with arrow keys. Shortcut: D key",resizeWindow:"Resize Window",disableResizeWindow:"Disable Resize Mode",enableResizeMode:"Enable resize mode. Shortcut: R key",disableResizeMode:"Disable resize mode. Shortcut: R key",enableResizeModeAria:"Enable keyboard resize mode with arrow keys. Shortcut: R key",disableResizeModeAria:"Disable keyboard resize mode with arrow keys. Shortcut: R key",resizeModeHint:"Resize handles enabled. Drag edges or corners to adjust. Press Esc or R to exit.",resizeModeEnabled:"Resize mode enabled. Drag edges or corners to adjust. Press Esc or R to exit.",resizeModeDisabled:"Resize mode disabled.",positionReset:"Transcript position reset.",styleTranscript:"Open transcript style settings",closeMenu:"Close Menu",styleTitle:"Transcript Style",autoscroll:"Autoscroll",settingsMenu:"Transcript dialog settings",showTimestamps:"Show timestamps",hideTimestamps:"Hide timestamps",showTimestampsAria:"Show timestamps in transcript",hideTimestampsAria:"Hide timestamps in transcript"},settings:{title:"Settings",quality:"Quality",speed:"Speed",captions:"Captions",language:"Language",reset:"Reset to defaults",close:"Close"},speeds:{normal:"Normal"},time:{display:"Time display",durationPrefix:"Duration: ",of:"of",hour:"{count} hour",hours:"{count} hours",minute:"{count} minute",minutes:"{count} minutes",second:"{count} second",seconds:"{count} seconds"},resume:{prompt:"Resume from {time}?",resume:"Resume",startOver:"Start Over"},playlist:{title:"Playlist",trackOf:"Track {current} of {total}",nowPlaying:"Now playing: Track {current} of {total}. {title}{artist}",by:" by ",untitled:"Untitled",trackUntitled:"Track {number}",currentlyPlaying:"Currently playing",notPlaying:"Not playing",pressEnterPlay:"Press Enter to play",pressEnterRestart:"Press Enter to restart",keyboardInstructions:"Playlist navigation: Use Up and Down arrow keys to move between tracks. Press Page Up or Page Down to skip 5 tracks. Press Home to go to first track, End to go to last track. Press Enter or Space to play the selected track.",endOfPlaylist:"End of playlist. {current} of {total}.",beginningOfPlaylist:"Beginning of playlist. 1 of {total}.",jumpedToLastTrack:"Jumped to last track. {current} of {total}.",jumpedToFirstTrack:"Jumped to first track. 1 of {total}.",firstTrack:"First track. 1 of {total}.",lastTrack:"Last track. {current} of {total}."}},a={de:()=>import("./vidply.de-235U7FBB.min.js"),es:()=>import("./vidply.es-KAKOGBQZ.min.js"),fr:()=>import("./vidply.fr-5CSEV3MB.min.js"),ja:()=>import("./vidply.ja-7EI7KZ6G.min.js")};function s(){return{en:t}}s();var i=new class{constructor(){this.currentLanguage="en",this.translations=s(),this.loadingPromises=new Map,this.builtInLanguageLoaders=a}setLanguage(e){this.translations[e]?this.currentLanguage=e:(console.warn(`Language "${e}" not found, falling back to English`),this.currentLanguage="en")}getLanguage(){return this.currentLanguage}async ensureLanguage(e){const t=(e||"").toLowerCase();if(!t)return this.currentLanguage;if(this.translations[t])return t;if(this.loadingPromises.has(t))return await this.loadingPromises.get(t),this.translations[t]?t:null;if(!this.builtInLanguageLoaders[t])return null;const s=(async()=>{try{const e=await(async e=>{const t=a[e];if(!t)return null;const s=await t();return s[e]||s.default||null})(t);e&&(this.translations[t]=e)}catch(e){console.warn(`Language "${t}" failed to load:`,e)}finally{this.loadingPromises.delete(t)}})();return this.loadingPromises.set(t,s),await s,this.translations[t]?t:null}t(e,t={}){const a=e.split(".");let s=this.translations[this.currentLanguage];for(const t of a){if(!s||"object"!=typeof s||!(t in s)){s=this.translations.en;for(const t of a){if(!s||"object"!=typeof s||!(t in s))return e;s=s[t]}break}s=s[t]}return"string"==typeof s&&Object.entries(t).forEach(([e,t])=>{s=s.replace(new RegExp(`{${e}}`,"g"),t)}),s}addTranslation(e,t){this.translations[e]||(this.translations[e]={}),Object.assign(this.translations[e],t)}async loadLanguageFromUrl(e,t){if(this.loadingPromises.has(t))return this.loadingPromises.get(t);const a=(async()=>{try{const a=await fetch(t);if(!a.ok)throw new Error(`Failed to load language file: ${a.statusText}`);const s=a.headers.get("content-type")||"";let i;const r=await a.arrayBuffer(),o=new TextDecoder("utf-8").decode(r);if(s.includes("application/json")||t.endsWith(".json"))i=JSON.parse(o);else if(s.includes("text/yaml")||s.includes("application/x-yaml")||t.endsWith(".yaml")||t.endsWith(".yml"))try{i=JSON.parse(o)}catch(e){if("undefined"==typeof window||!window.jsyaml)throw console.warn("YAML parsing requires js-yaml library. Please include it or use JSON format."),new Error("YAML parsing not available. Please use JSON format or include js-yaml library.");i=window.jsyaml.load(o)}else i=JSON.parse(o);return this.addTranslation(e,i),i}catch(e){throw console.error(`Error loading language file from ${t}:`,e),e}finally{this.loadingPromises.delete(t)}})();return this.loadingPromises.set(t,a),a}async loadLanguagesFromUrls(e){const t=Object.entries(e).map(([e,t])=>this.loadLanguageFromUrl(e,t));await Promise.all(t)}};export{e as DOMUtils,i as i18n};