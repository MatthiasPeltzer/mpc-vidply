{
  "version": 3,
  "sources": ["../../src/controls/TranscriptManager.js"],
  "sourcesContent": ["/**\n * Transcript Manager Component\n * Manages transcript display and interaction\n */\n\nimport { DOMUtils } from '../utils/DOMUtils.js';\nimport { TimeUtils } from '../utils/TimeUtils.js';\nimport { createIconElement } from '../icons/Icons.js';\nimport { i18n } from '../i18n/i18n.js';\nimport { StorageManager } from '../utils/StorageManager.js';\nimport { focusElement, focusFirstElement } from '../utils/FocusUtils.js';\nimport { createMenuItem, attachMenuKeyboardNavigation, focusFirstMenuItem } from '../utils/MenuUtils.js';\nimport { DraggableResizable } from '../utils/DraggableResizable.js';\nimport { createLabeledSelect, toggleLabeledSelect, preventDragOnElement } from '../utils/FormUtils.js';\n\nexport class TranscriptManager {\n  constructor(player) {\n    this.player = player;\n    this.transcriptWindow = null;\n    this.transcriptEntries = [];\n    this.metadataCues = [];\n    this.currentActiveEntry = null;\n    this.isVisible = false;\n    \n    // Storage manager\n    this.storage = new StorageManager('vidply');\n    \n    // Draggable/Resizable utility\n    this.draggableResizable = null;\n    \n    // Settings menu state\n    this.settingsMenuVisible = false;\n    this.settingsMenu = null;\n    this.settingsButton = null;\n    this.settingsMenuJustOpened = false;\n    \n    // Resize mode state\n    this.resizeOptionButton = null;\n    this.resizeOptionText = null;\n    this.dragOptionButton = null;\n    this.dragOptionText = null;\n    this.resizeModeIndicator = null;\n    this.resizeModeIndicatorTimeout = null;\n    this.transcriptResizeHandles = [];\n    this.liveRegion = null;\n    \n    // Style dialog state\n    this.styleDialog = null;\n    this.styleDialogVisible = false;\n    this.styleDialogJustOpened = false;\n    \n    // Language selector state\n    this.languageSelector = null;\n    this.languageLabel = null;\n    this.currentTranscriptLanguage = null;\n    this.availableTranscriptLanguages = [];\n    this.languageSelectorHandler = null;\n    \n    // Load saved preferences from localStorage\n    const savedPreferences = this.storage.getTranscriptPreferences();\n    \n    // Autoscroll state (default: true)\n    this.autoscrollEnabled = savedPreferences?.autoscroll !== undefined ? savedPreferences.autoscroll : true;\n    \n    // Show timestamps state (default: false)\n    this.showTimestamps = savedPreferences?.showTimestamps !== undefined ? savedPreferences.showTimestamps : false;\n    \n    // Transcript styling options (with defaults, then player options, then saved preferences)\n    this.transcriptStyle = {\n      fontSize: savedPreferences?.fontSize || this.player.options.transcriptFontSize || '100%',\n      fontFamily: savedPreferences?.fontFamily || this.player.options.transcriptFontFamily || 'sans-serif',\n      color: savedPreferences?.color || this.player.options.transcriptColor || '#ffffff',\n      backgroundColor: savedPreferences?.backgroundColor || this.player.options.transcriptBackgroundColor || '#1e1e1e',\n      opacity: savedPreferences?.opacity ?? this.player.options.transcriptOpacity ?? 0.98\n    };\n    \n    // Store event handlers for cleanup\n    this.handlers = {\n      timeupdate: () => this.updateActiveEntry(),\n      audiodescriptionenabled: () => {\n        if (this.isVisible) {\n          this.loadTranscriptData();\n        }\n      },\n      audiodescriptiondisabled: () => {\n        if (this.isVisible) {\n          this.loadTranscriptData();\n        }\n      },\n      resize: null,\n      settingsClick: null,\n      settingsKeydown: null,\n      documentClick: null,\n      styleDialogKeydown: null\n    };\n    \n    // Timeout management (for cleanup)\n    this.timeouts = new Set();\n    \n    this.init();\n  }\n\n  init() {\n    // Set up metadata handling immediately (independent of transcript display)\n    this.setupMetadataHandlingOnLoad();\n    \n    // Listen for time updates to highlight active transcript entry\n    this.player.on('timeupdate', this.handlers.timeupdate);\n    \n    // Listen for audio description changes to reload transcript\n    this.player.on('audiodescriptionenabled', this.handlers.audiodescriptionenabled);\n    this.player.on('audiodescriptiondisabled', this.handlers.audiodescriptiondisabled);\n    \n    // Reposition transcript when entering/exiting fullscreen\n    this.player.on('fullscreenchange', () => {\n      if (this.isVisible) {\n        // Re-setup drag/drop when entering/exiting fullscreen on mobile devices\n        // This enables drag/resize when entering fullscreen on mobile\n        const isMobile = window.innerWidth < 768;\n        if (isMobile) {\n          this.setupDragAndDrop();\n        }\n        \n        // Only auto-position if user hasn't manually positioned it\n        if (!this.draggableResizable || !this.draggableResizable.manuallyPositioned) {\n          // Add a small delay to ensure DOM has updated after fullscreen transition\n          this.setManagedTimeout(() => this.positionTranscript(), 100);\n        }\n      }\n    });\n  }\n\n  /**\n   * Toggle transcript window visibility\n   */\n  toggleTranscript() {\n    if (this.isVisible) {\n      this.hideTranscript();\n    } else {\n      this.showTranscript();\n    }\n  }\n\n  /**\n   * Show transcript window\n   */\n  showTranscript() {\n    if (this.transcriptWindow) {\n      this.transcriptWindow.style.display = 'flex';\n      this.isVisible = true;\n\n      if (this.player.controlBar && typeof this.player.controlBar.updateTranscriptButton === 'function') {\n        this.player.controlBar.updateTranscriptButton();\n      }\n      \n      // Focus the settings button for keyboard accessibility\n      focusElement(this.settingsButton, { delay: 150 });\n      return;\n    }\n\n    // Create transcript window\n    this.createTranscriptWindow();\n    this.loadTranscriptData();\n    \n    // Show the window\n    if (this.transcriptWindow) {\n      this.transcriptWindow.style.display = 'flex';\n      \n      // Only auto-position if user hasn't manually positioned it\n      // This prevents overwriting saved positions from localStorage\n      if (!this.draggableResizable || !this.draggableResizable.manuallyPositioned) {\n        this.setManagedTimeout(() => this.positionTranscript(), 0);\n      }\n      \n      // Focus the settings button for keyboard accessibility\n      focusElement(this.settingsButton, { delay: 150 });\n    }\n    this.isVisible = true;\n  }\n\n  /**\n   * Hide transcript window\n   */\n  hideTranscript({ focusButton = false } = {}) {\n    if (this.transcriptWindow) {\n      this.transcriptWindow.style.display = 'none';\n      this.isVisible = false;\n    }\n    if (this.draggableResizable && this.draggableResizable.pointerResizeMode) {\n      this.draggableResizable.disablePointerResizeMode();\n      this.updateResizeOptionState();\n    }\n    this.hideResizeModeIndicator();\n    this.announceLive('');\n\n    // Update transcript button state in control bar\n    if (this.player.controlBar && typeof this.player.controlBar.updateTranscriptButton === 'function') {\n      this.player.controlBar.updateTranscriptButton();\n    }\n\n    if (focusButton) {\n      const transcriptButton = this.player.controlBar?.controls?.transcript;\n      if (transcriptButton && typeof transcriptButton.focus === 'function') {\n        transcriptButton.focus({ preventScroll: true });\n      }\n    }\n  }\n\n  /**\n   * Create the transcript window UI\n   */\n  createTranscriptWindow() {\n    this.transcriptWindow = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-window`,\n      attributes: {\n        'role': 'dialog',\n        'aria-label': i18n.t('transcript.ariaLabel'),\n        'tabindex': '-1'\n      }\n    });\n\n    // Header (draggable)\n    this.transcriptHeader = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-header`,\n      attributes: {\n        'tabindex': '0'\n      }\n    });\n\n    // Header left side (settings button + title)\n    this.headerLeft = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-header-left`\n    });\n\n    // Settings button\n    const settingsAriaLabel = i18n.t('transcript.settingsMenu');\n    this.settingsButton = DOMUtils.createElement('button', {\n      className: `${this.player.options.classPrefix}-transcript-settings`,\n      attributes: {\n        'type': 'button',\n        'aria-label': settingsAriaLabel,\n        'aria-expanded': 'false'\n      }\n    });\n    this.settingsButton.appendChild(createIconElement('settings'));\n    DOMUtils.attachTooltip(this.settingsButton, settingsAriaLabel, this.player.options.classPrefix);\n    this.handlers.settingsClick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (this.settingsMenuVisible) {\n        this.hideSettingsMenu();\n      } else {\n        this.showSettingsMenu();\n      }\n    };\n    this.settingsButton.addEventListener('click', this.handlers.settingsClick);\n    \n    // Keyboard handler for settings button\n    this.handlers.settingsKeydown = (e) => {\n      // D key to toggle keyboard drag mode\n      if (e.key === 'd' || e.key === 'D') {\n        e.preventDefault();\n        e.stopPropagation();\n        this.toggleKeyboardDragMode();\n      }\n      // R key to toggle resize mode\n      else if (e.key === 'r' || e.key === 'R') {\n        e.preventDefault();\n        e.stopPropagation();\n        this.toggleResizeMode();\n      }\n      // Escape to close menu if open\n      else if (e.key === 'Escape' && this.settingsMenuVisible) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.hideSettingsMenu();\n      }\n    };\n    this.settingsButton.addEventListener('keydown', this.handlers.settingsKeydown);\n\n    const title = DOMUtils.createElement('h3', {\n      textContent: `${i18n.t('transcript.title')}. ${i18n.t('transcript.dragResizePrompt')}`\n    });\n\n    // Autoscroll checkbox\n    const autoscrollId = `${this.player.options.classPrefix}-transcript-autoscroll-${Date.now()}`;\n    \n    const autoscrollLabel = DOMUtils.createElement('label', {\n      className: `${this.player.options.classPrefix}-transcript-autoscroll-label`,\n      attributes: {\n        'for': autoscrollId\n      }\n    });\n    \n    this.autoscrollCheckbox = DOMUtils.createElement('input', {\n      attributes: {\n        'id': autoscrollId,\n        'type': 'checkbox'\n      }\n    });\n    // Set checked property directly (boolean attribute, not \"true\" string)\n    if (this.autoscrollEnabled) {\n      this.autoscrollCheckbox.checked = true;\n    }\n    \n    const autoscrollText = DOMUtils.createElement('span', {\n      textContent: i18n.t('transcript.autoscroll'),\n      className: `${this.player.options.classPrefix}-transcript-autoscroll-text`\n    });\n    \n    autoscrollLabel.appendChild(this.autoscrollCheckbox);\n    autoscrollLabel.appendChild(autoscrollText);\n    \n    // Handle autoscroll checkbox change\n    this.autoscrollCheckbox.addEventListener('change', (e) => {\n      this.autoscrollEnabled = e.target.checked;\n      this.saveAutoscrollPreference();\n    });\n\n    this.transcriptHeader.appendChild(title);\n    this.headerLeft.appendChild(this.settingsButton);\n    this.headerLeft.appendChild(autoscrollLabel);\n    \n    // Language selector (will be populated after tracks are loaded)\n    const selectId = `${this.player.options.classPrefix}-transcript-language-select-${Date.now()}`;\n    const { label: languageLabel, select: languageSelector } = createLabeledSelect({\n      classPrefix: this.player.options.classPrefix,\n      labelClass: `${this.player.options.classPrefix}-transcript-language-label`,\n      selectClass: `${this.player.options.classPrefix}-transcript-language-select`,\n      labelText: 'settings.language',\n      selectId: selectId,\n      hidden: false // Don't hide individual elements, we'll hide the wrapper instead\n    });\n    \n    this.languageLabel = languageLabel;\n    this.languageSelector = languageSelector;\n    \n    // Wrap label and select in a container for vertical stacking\n    const languageSelectorWrapper = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-language-wrapper`,\n      attributes: {\n        'style': 'display: none;' // Hidden until we detect multiple languages\n      }\n    });\n    languageSelectorWrapper.appendChild(this.languageLabel);\n    languageSelectorWrapper.appendChild(this.languageSelector);\n    this.languageSelectorWrapper = languageSelectorWrapper;\n    \n    // Prevent drag when interacting with wrapper\n    preventDragOnElement(languageSelectorWrapper);\n    \n    this.headerLeft.appendChild(languageSelectorWrapper);\n\n    const closeAriaLabel = i18n.t('transcript.close');\n    const closeButton = DOMUtils.createElement('button', {\n      className: `${this.player.options.classPrefix}-transcript-close`,\n      attributes: {\n        'type': 'button',\n        'aria-label': closeAriaLabel\n      }\n    });\n    closeButton.appendChild(createIconElement('close'));\n    DOMUtils.attachTooltip(closeButton, closeAriaLabel, this.player.options.classPrefix);\n    closeButton.addEventListener('click', () => this.hideTranscript({ focusButton: true }));\n\n    this.transcriptHeader.appendChild(this.headerLeft);\n    this.transcriptHeader.appendChild(closeButton);\n\n    // Content container\n    this.transcriptContent = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-content`\n    });\n\n    this.transcriptWindow.appendChild(this.transcriptHeader);\n    this.transcriptWindow.appendChild(this.transcriptContent);\n\n    this.createResizeHandles();\n\n    // Live region for announcements (screen reader feedback)\n    this.liveRegion = DOMUtils.createElement('div', {\n      className: 'vidply-sr-only',\n      attributes: {\n        'aria-live': 'polite',\n        'aria-atomic': 'true'\n      }\n    });\n    this.transcriptWindow.appendChild(this.liveRegion);\n\n    // Append to player container\n    this.player.container.appendChild(this.transcriptWindow);\n    \n    // Setup drag functionality FIRST (this will restore saved position if it exists)\n    this.setupDragAndDrop();\n    \n    // Then position it next to the video wrapper ONLY if user hasn't manually positioned it\n    // This ensures we don't overwrite saved positions from localStorage\n    if (!this.draggableResizable || !this.draggableResizable.manuallyPositioned) {\n      this.positionTranscript();\n    }\n    \n    // Setup document click handler to close settings menu and style dialog\n    // DON'T add it yet - it will be added when the menu is first opened\n    this.handlers.documentClick = (e) => {\n      // Ignore if menu was just opened (prevents immediate closing)\n      if (this.settingsMenuJustOpened) {\n        return;\n      }\n      \n      // Ignore if style dialog was just opened (prevents immediate closing)\n      if (this.styleDialogJustOpened) {\n        return;\n      }\n      \n      // Ignore clicks on the settings button itself\n      if (this.settingsButton && this.settingsButton.contains(e.target)) {\n        return;\n      }\n      \n      // Ignore clicks on the settings menu items\n      if (this.settingsMenu && this.settingsMenu.contains(e.target)) {\n        return;\n      }\n      \n      // Close settings menu if clicking outside\n      if (this.settingsMenuVisible) {\n        this.hideSettingsMenu();\n      }\n      \n      // Close style dialog if clicking outside (but not on settings button)\n      if (this.styleDialogVisible && this.styleDialog && \n          !this.styleDialog.contains(e.target)) {\n        this.hideStyleDialog();\n      }\n    };\n    // Store flag to track if handler has been added\n    this.documentClickHandlerAdded = false;\n    \n    // Re-position on window resize (debounced) - but only if not manually positioned\n    let resizeTimeout;\n    this.handlers.resize = () => {\n      if (resizeTimeout) {\n        this.clearManagedTimeout(resizeTimeout);\n      }\n      resizeTimeout = this.setManagedTimeout(() => {\n        // Only auto-position if user hasn't manually moved it\n        if (!this.draggableResizable || !this.draggableResizable.manuallyPositioned) {\n          this.positionTranscript();\n        }\n      }, 100);\n    };\n    window.addEventListener('resize', this.handlers.resize);\n  }\n  \n  createResizeHandles() {\n    if (!this.transcriptWindow) return;\n\n    const directions = ['n', 's', 'e', 'w', 'ne', 'nw', 'se', 'sw'];\n    this.transcriptResizeHandles = directions.map(direction => {\n      const handle = DOMUtils.createElement('div', {\n        className: `${this.player.options.classPrefix}-transcript-resize-handle ${this.player.options.classPrefix}-transcript-resize-${direction}`,\n        attributes: {\n          'data-direction': direction,\n          'data-vidply-managed-resize': 'true',\n          'aria-hidden': 'true'\n        }\n      });\n\n      handle.style.display = 'none';\n      this.transcriptWindow.appendChild(handle);\n      return handle;\n    });\n  }\n\n  /**\n   * Position transcript window next to video\n   */\n  positionTranscript() {\n    if (!this.transcriptWindow || !this.player.videoWrapper || !this.isVisible) return;\n    \n    // Don't auto-position if user has manually positioned it\n    if (this.draggableResizable && this.draggableResizable.manuallyPositioned) {\n      return;\n    }\n    \n    const isMobile = window.innerWidth < 768;\n    const videoRect = this.player.videoWrapper.getBoundingClientRect();\n    \n    // Check if player is in fullscreen mode\n    const isFullscreen = this.player.state.fullscreen;\n    \n    if (isMobile && !isFullscreen) {\n      // Mobile: Position underneath the video and controls as part of the layout\n      this.transcriptWindow.style.position = 'relative';\n      this.transcriptWindow.style.left = '0';\n      this.transcriptWindow.style.right = '0';\n      this.transcriptWindow.style.bottom = 'auto';\n      this.transcriptWindow.style.top = 'auto';\n      this.transcriptWindow.style.width = '100%';\n      this.transcriptWindow.style.maxWidth = '100%';\n      this.transcriptWindow.style.maxHeight = '400px';\n      this.transcriptWindow.style.height = 'auto';\n      this.transcriptWindow.style.borderRadius = '0';\n      this.transcriptWindow.style.transform = 'none';\n      this.transcriptWindow.style.border = 'none';\n      this.transcriptWindow.style.borderTop = '1px solid var(--vidply-border-light)';\n      // Remove any empty border properties that might have been set\n      this.transcriptWindow.style.removeProperty('border-right');\n      this.transcriptWindow.style.removeProperty('border-bottom');\n      this.transcriptWindow.style.removeProperty('border-left');\n      // Remove border-image properties that can cause parse errors\n      this.transcriptWindow.style.removeProperty('border-image');\n      this.transcriptWindow.style.removeProperty('border-image-source');\n      this.transcriptWindow.style.removeProperty('border-image-slice');\n      this.transcriptWindow.style.removeProperty('border-image-width');\n      this.transcriptWindow.style.removeProperty('border-image-outset');\n      this.transcriptWindow.style.removeProperty('border-image-repeat');\n      this.transcriptWindow.style.boxShadow = 'none';\n      // Disable dragging on mobile\n      if (this.transcriptHeader) {\n        this.transcriptHeader.style.cursor = 'default';\n      }\n      \n      // Ensure transcript is at the container level for proper stacking\n      if (this.transcriptWindow.parentNode !== this.player.container) {\n        this.player.container.appendChild(this.transcriptWindow);\n      }\n    } else if (isFullscreen) {\n      // In fullscreen: position in bottom right corner inside the video\n      this.transcriptWindow.style.position = 'fixed';\n      this.transcriptWindow.style.left = 'auto';\n      this.transcriptWindow.style.right = '20px';\n      this.transcriptWindow.style.bottom = '80px'; // Above controls\n      this.transcriptWindow.style.top = 'auto';\n      this.transcriptWindow.style.maxHeight = 'calc(100vh - 180px)'; // Leave space for controls\n      this.transcriptWindow.style.height = 'auto';\n      const fullscreenMinWidth = 260;\n      const fullscreenAvailable = Math.max(fullscreenMinWidth, window.innerWidth - 40);\n      const fullscreenDesired = parseFloat(this.transcriptWindow.style.width) || 400;\n      const fullscreenWidth = Math.max(fullscreenMinWidth, Math.min(fullscreenDesired, fullscreenAvailable));\n      this.transcriptWindow.style.width = `${fullscreenWidth}px`;\n      this.transcriptWindow.style.maxWidth = 'none';\n      this.transcriptWindow.style.borderRadius = '8px';\n      this.transcriptWindow.style.border = '1px solid var(--vidply-border)';\n      // Remove borderTop and any other individual border properties to avoid empty values\n      this.transcriptWindow.style.removeProperty('border-top');\n      this.transcriptWindow.style.removeProperty('border-right');\n      this.transcriptWindow.style.removeProperty('border-bottom');\n      this.transcriptWindow.style.removeProperty('border-left');\n      // Remove border-image properties that can cause parse errors\n      this.transcriptWindow.style.removeProperty('border-image');\n      this.transcriptWindow.style.removeProperty('border-image-source');\n      this.transcriptWindow.style.removeProperty('border-image-slice');\n      this.transcriptWindow.style.removeProperty('border-image-width');\n      this.transcriptWindow.style.removeProperty('border-image-outset');\n      this.transcriptWindow.style.removeProperty('border-image-repeat');\n      // Enable dragging in fullscreen (including touch devices)\n      if (this.transcriptHeader) {\n        this.transcriptHeader.style.cursor = 'move';\n      }\n      \n      // Move back to container for fullscreen\n      if (this.transcriptWindow.parentNode !== this.player.container) {\n        this.player.container.appendChild(this.transcriptWindow);\n      }\n    } else {\n      // Desktop mode: position in right side of viewport\n      const transcriptWidth = parseFloat(this.transcriptWindow.style.width) || 400;\n      const padding = 20;\n      const minWidth = 260;\n      const containerRect = this.player.container.getBoundingClientRect();\n\n      const ensureContainerPositioned = () => {\n        const computed = window.getComputedStyle(this.player.container);\n        if (computed.position === 'static') {\n          this.player.container.style.position = 'relative';\n        }\n      };\n\n      ensureContainerPositioned();\n\n      const left = (videoRect.right - containerRect.left) + padding;\n      const availableWidth = window.innerWidth - videoRect.right - padding;\n      const appliedWidth = Math.max(minWidth, Math.min(transcriptWidth, availableWidth));\n      const appliedHeight = videoRect.height;\n\n      this.transcriptWindow.style.position = 'absolute';\n      this.transcriptWindow.style.left = `${left}px`;\n      this.transcriptWindow.style.right = 'auto';\n      this.transcriptWindow.style.bottom = 'auto';\n      this.transcriptWindow.style.top = '0';\n      this.transcriptWindow.style.height = `${appliedHeight}px`;\n      this.transcriptWindow.style.maxHeight = 'none';\n      this.transcriptWindow.style.width = `${appliedWidth}px`;\n      this.transcriptWindow.style.maxWidth = 'none';\n      this.transcriptWindow.style.borderRadius = '8px';\n      this.transcriptWindow.style.border = '1px solid var(--vidply-border)';\n      // Remove borderTop and any other individual border properties to avoid empty values\n      this.transcriptWindow.style.removeProperty('border-top');\n      this.transcriptWindow.style.removeProperty('border-right');\n      this.transcriptWindow.style.removeProperty('border-bottom');\n      this.transcriptWindow.style.removeProperty('border-left');\n      // Remove border-image properties that can cause parse errors\n      this.transcriptWindow.style.removeProperty('border-image');\n      this.transcriptWindow.style.removeProperty('border-image-source');\n      this.transcriptWindow.style.removeProperty('border-image-slice');\n      this.transcriptWindow.style.removeProperty('border-image-width');\n      this.transcriptWindow.style.removeProperty('border-image-outset');\n      this.transcriptWindow.style.removeProperty('border-image-repeat');\n      // Enable dragging on desktop\n      if (this.transcriptHeader) {\n        this.transcriptHeader.style.cursor = 'move';\n      }\n      \n      // Move back to container for desktop\n      if (this.transcriptWindow.parentNode !== this.player.container) {\n        this.player.container.appendChild(this.transcriptWindow);\n      }\n    }\n  }\n\n  /**\n   * Get available transcript languages from tracks\n   */\n  getAvailableTranscriptLanguages() {\n    const textTracks = this.player.textTracks;\n    const languages = new Map();\n    \n    // Collect all caption/subtitle tracks with their languages\n    textTracks.forEach(track => {\n      if ((track.kind === 'captions' || track.kind === 'subtitles') && track.language) {\n        if (!languages.has(track.language)) {\n          languages.set(track.language, {\n            language: track.language,\n            label: track.label || track.language,\n            track: track\n          });\n        }\n      }\n    });\n    \n    return Array.from(languages.values());\n  }\n\n  /**\n   * Update language selector dropdown\n   */\n  updateLanguageSelector() {\n    if (!this.languageSelector) return;\n    \n    this.availableTranscriptLanguages = this.getAvailableTranscriptLanguages();\n    \n    // Clear existing options\n    this.languageSelector.innerHTML = '';\n    \n    // Only show selector if there are 2+ languages\n    if (this.availableTranscriptLanguages.length < 2) {\n      if (this.languageSelectorWrapper) {\n        this.languageSelectorWrapper.style.display = 'none';\n      }\n      return;\n    }\n    \n    // Show selector wrapper\n    if (this.languageSelectorWrapper) {\n      this.languageSelectorWrapper.style.display = 'flex';\n    }\n    \n    this.availableTranscriptLanguages.forEach((langInfo, index) => {\n      const option = DOMUtils.createElement('option', {\n        textContent: langInfo.label,\n        attributes: {\n          'value': langInfo.language,\n          'lang': langInfo.language\n        }\n      });\n      this.languageSelector.appendChild(option);\n    });\n    \n    // Set current selection\n    if (this.currentTranscriptLanguage) {\n      this.languageSelector.value = this.currentTranscriptLanguage;\n    } else if (this.availableTranscriptLanguages.length > 0) {\n      // Default to first language or active track\n      const activeTrack = this.player.textTracks.find(\n        track => (track.kind === 'captions' || track.kind === 'subtitles') && track.mode === 'showing'\n      );\n      this.currentTranscriptLanguage = activeTrack ? activeTrack.language : this.availableTranscriptLanguages[0].language;\n      this.languageSelector.value = this.currentTranscriptLanguage;\n    }\n    \n    // Remove existing change listener if any\n    if (this.languageSelectorHandler) {\n      this.languageSelector.removeEventListener('change', this.languageSelectorHandler);\n    }\n    \n    // Handle language change\n    this.languageSelectorHandler = (e) => {\n      this.currentTranscriptLanguage = e.target.value;\n      this.loadTranscriptData();\n      \n      // Set lang attribute for screen readers to pronounce text correctly\n      if (this.transcriptContent && this.currentTranscriptLanguage) {\n        this.transcriptContent.setAttribute('lang', this.currentTranscriptLanguage);\n      }\n    };\n    this.languageSelector.addEventListener('change', this.languageSelectorHandler);\n  }\n\n  /**\n   * Load transcript data from caption/subtitle tracks\n   */\n  loadTranscriptData() {\n    this.transcriptEntries = [];\n    this.transcriptContent.innerHTML = '';\n\n    // Get all text tracks\n    const textTracks = this.player.textTracks;\n    \n    // Find track for selected language, or default to first available\n    let captionTrack = null;\n    if (this.currentTranscriptLanguage) {\n      captionTrack = textTracks.find(\n        track => (track.kind === 'captions' || track.kind === 'subtitles') && \n                 track.language === this.currentTranscriptLanguage\n      );\n    }\n    \n    // Fallback to first available caption/subtitle track\n    if (!captionTrack) {\n      captionTrack = textTracks.find(\n        track => track.kind === 'captions' || track.kind === 'subtitles'\n      );\n      if (captionTrack) {\n        this.currentTranscriptLanguage = captionTrack.language;\n      }\n    }\n    \n    // Find description track matching the selected language\n    let descriptionTrack = null;\n    if (this.currentTranscriptLanguage) {\n      descriptionTrack = textTracks.find(\n        track => track.kind === 'descriptions' && track.language === this.currentTranscriptLanguage\n      );\n    }\n    // Fallback to first available description track if no match found\n    if (!descriptionTrack) {\n      descriptionTrack = textTracks.find(track => track.kind === 'descriptions');\n    }\n    \n    const metadataTrack = textTracks.find(track => track.kind === 'metadata');\n\n    // We need at least one track type available for display\n    // (captions, descriptions, or metadata - though metadata is not displayed)\n    if (!captionTrack && !descriptionTrack && !metadataTrack) {\n      this.showNoTranscriptMessage();\n      return;\n    }\n\n    // Enable all tracks to load cues so they're available for the transcript\n    const tracksToLoad = [captionTrack, descriptionTrack, metadataTrack].filter(Boolean);\n    tracksToLoad.forEach(track => {\n      if (track.mode === 'disabled') {\n        track.mode = 'hidden';\n      }\n    });\n\n    // Check if any tracks are still loading\n    const needsLoading = tracksToLoad.some(track => !track.cues || track.cues.length === 0);\n    \n    if (needsLoading) {\n      // Wait for cues to load\n      const loadingMessage = DOMUtils.createElement('div', {\n        className: `${this.player.options.classPrefix}-transcript-loading`,\n        textContent: i18n.t('transcript.loading')\n      });\n      this.transcriptContent.appendChild(loadingMessage);\n\n      let loaded = 0;\n      const onLoad = () => {\n        loaded++;\n        if (loaded >= tracksToLoad.length) {\n          this.loadTranscriptData();\n        }\n      };\n\n      tracksToLoad.forEach(track => {\n        track.addEventListener('load', onLoad, { once: true });\n      });\n\n      // Fallback timeout\n      this.setManagedTimeout(() => {\n        this.loadTranscriptData();\n      }, 500);\n      \n      return;\n    }\n\n    // Collect all cues from all tracks with their type\n    const allCues = [];\n    \n    if (captionTrack && captionTrack.cues) {\n      Array.from(captionTrack.cues).forEach(cue => {\n        allCues.push({ cue, type: 'caption' });\n      });\n    }\n    \n    // Always include description cues in transcript for completeness\n    // (Audio description toggle only controls whether they're read aloud,\n    // but the transcript should always show all content for accessibility)\n    if (descriptionTrack && descriptionTrack.cues) {\n      Array.from(descriptionTrack.cues).forEach(cue => {\n        allCues.push({ cue, type: 'description' });\n      });\n    }\n    \n    // Store metadata separately for programmatic use (don't display in transcript)\n    if (metadataTrack && metadataTrack.cues) {\n      this.metadataCues = Array.from(metadataTrack.cues);\n      this.setupMetadataHandling();\n    }\n\n    // Sort all cues by start time\n    allCues.sort((a, b) => a.cue.startTime - b.cue.startTime);\n\n    // Build transcript from captions and descriptions only\n    allCues.forEach((item, index) => {\n      const entry = this.createTranscriptEntry(item.cue, index, item.type);\n      this.transcriptEntries.push({\n        element: entry,\n        cue: item.cue,\n        type: item.type,\n        startTime: item.cue.startTime,\n        endTime: item.cue.endTime\n      });\n      this.transcriptContent.appendChild(entry);\n    });\n    \n    // Apply current styles to newly loaded entries\n    this.applyTranscriptStyles();\n    \n    // Apply timestamp visibility preference\n    this.updateTimestampVisibility();\n    \n    // Set lang attribute for screen readers to pronounce text correctly\n    if (this.transcriptContent && this.currentTranscriptLanguage) {\n      this.transcriptContent.setAttribute('lang', this.currentTranscriptLanguage);\n    }\n    \n    // Update language selector after loading\n    this.updateLanguageSelector();\n  }\n\n  /**\n   * Setup metadata handling on player load\n   * This runs independently of transcript loading\n   */\n  setupMetadataHandlingOnLoad() {\n    // Wait for metadata to be loaded\n    const setupMetadata = () => {\n      const textTracks = this.player.textTracks;\n      const metadataTrack = textTracks.find(track => track.kind === 'metadata');\n      \n      if (metadataTrack) {\n        // Enable the metadata track so cuechange events fire\n        // Use 'hidden' mode so it doesn't display anything, but events still work\n        if (metadataTrack.mode === 'disabled') {\n          metadataTrack.mode = 'hidden';\n        }\n        \n        // Check if we already added the listener\n        if (this.metadataCueChangeHandler) {\n          metadataTrack.removeEventListener('cuechange', this.metadataCueChangeHandler);\n        }\n        \n        // Add event listener for cue changes\n        this.metadataCueChangeHandler = () => {\n          const activeCues = Array.from(metadataTrack.activeCues || []);\n          if (activeCues.length > 0) {\n            // Debug logging (can be removed in production)\n            if (this.player.options.debug) {\n              console.log('[VidPly Metadata] Active cues:', activeCues.map(c => ({\n                start: c.startTime,\n                end: c.endTime,\n                text: c.text\n              })));\n            }\n          }\n          activeCues.forEach(cue => {\n            this.handleMetadataCue(cue);\n          });\n        };\n        \n        metadataTrack.addEventListener('cuechange', this.metadataCueChangeHandler);\n        \n        // Debug: Log metadata track setup\n        if (this.player.options.debug) {\n          const cueCount = metadataTrack.cues ? metadataTrack.cues.length : 0;\n          console.log('[VidPly Metadata] Track enabled,', cueCount, 'cues available');\n        }\n      } else if (this.player.options.debug) {\n        console.warn('[VidPly Metadata] No metadata track found');\n      }\n    };\n    \n    // Try immediately\n    setupMetadata();\n    \n    // Also try after loadedmetadata event\n    this.player.on('loadedmetadata', setupMetadata);\n  }\n\n  /**\n   * Setup metadata handling\n   * Metadata cues are not displayed but can be used programmatically\n   * This is called when transcript data is loaded (for storing cues)\n   */\n  setupMetadataHandling() {\n    if (!this.metadataCues || this.metadataCues.length === 0) {\n      return;\n    }\n\n    // The actual event handling is set up in setupMetadataHandlingOnLoad()\n    // This method just stores the cues for reference\n    if (this.player.options.debug) {\n      console.log('[VidPly Metadata]', this.metadataCues.length, 'cues stored from transcript load');\n    }\n  }\n\n  /**\n   * Handle individual metadata cues\n   * Parses metadata text and emits events or triggers actions\n   */\n  handleMetadataCue(cue) {\n    const text = cue.text.trim();\n    \n    // Debug logging\n    if (this.player.options.debug) {\n      console.log('[VidPly Metadata] Processing cue:', {\n        time: cue.startTime,\n        text: text\n      });\n    }\n    \n    // Emit a generic metadata event that developers can listen to\n    this.player.emit('metadata', {\n      time: cue.startTime,\n      endTime: cue.endTime,\n      text: text,\n      cue: cue\n    });\n\n    // Parse for specific commands (examples based on wwa_meta.vtt format)\n    if (text.includes('PAUSE')) {\n      // Automatically pause the video\n      if (!this.player.state.paused) {\n        if (this.player.options.debug) {\n          console.log('[VidPly Metadata] Pausing video at', cue.startTime);\n        }\n        this.player.pause();\n      }\n      // Also emit event for developers who want to listen\n      this.player.emit('metadata:pause', { time: cue.startTime, text: text });\n    }\n\n    // Parse for focus directives\n    const focusMatch = text.match(/FOCUS:([\\w#-]+)/);\n    if (focusMatch) {\n      const targetSelector = focusMatch[1];\n      // Automatically focus the target element\n      const targetElement = document.querySelector(targetSelector);\n      if (targetElement) {\n        if (this.player.options.debug) {\n          console.log('[VidPly Metadata] Focusing element:', targetSelector);\n        }\n        // Use setTimeout to ensure DOM is ready\n        this.setManagedTimeout(() => {\n          targetElement.focus({ preventScroll: true });\n        }, 10);\n      } else if (this.player.options.debug) {\n        console.warn('[VidPly Metadata] Element not found:', targetSelector);\n      }\n      // Also emit event for developers who want to listen\n      this.player.emit('metadata:focus', { \n        time: cue.startTime, \n        target: targetSelector,\n        element: targetElement,\n        text: text \n      });\n    }\n\n    // Parse for hashtag references\n    const hashtags = text.match(/#[\\w-]+/g);\n    if (hashtags) {\n      if (this.player.options.debug) {\n        console.log('[VidPly Metadata] Hashtags found:', hashtags);\n      }\n      this.player.emit('metadata:hashtags', {\n        time: cue.startTime,\n        hashtags: hashtags,\n        text: text\n      });\n    }\n  }\n\n  /**\n   * Create a single transcript entry element\n   */\n  createTranscriptEntry(cue, index, type = 'caption') {\n    const entryText = this.stripVTTFormatting(cue.text);\n    \n    const entry = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-entry ${this.player.options.classPrefix}-transcript-${type}`,\n      attributes: {\n        'tabindex': '0',\n        'data-start': String(cue.startTime),\n        'data-end': String(cue.endTime),\n        'data-type': type\n      }\n    });\n\n    const timestamp = DOMUtils.createElement('span', {\n      className: `${this.player.options.classPrefix}-transcript-time`,\n      textContent: TimeUtils.formatTime(cue.startTime),\n      attributes: {\n        'aria-hidden': 'true'  // Hide from screen readers - decorative timestamp\n      }\n    });\n\n    const text = DOMUtils.createElement('span', {\n      className: `${this.player.options.classPrefix}-transcript-text`,\n      textContent: entryText\n    });\n\n    entry.appendChild(timestamp);\n    entry.appendChild(text);\n\n    // Click to seek\n    const seekToTime = () => {\n      this.player.seek(cue.startTime);\n      if (this.player.state.paused) {\n        this.player.play();\n      }\n    };\n\n    entry.addEventListener('click', seekToTime);\n    entry.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        seekToTime();\n      }\n    });\n\n    return entry;\n  }\n\n  /**\n   * Strip VTT formatting tags from text\n   */\n  stripVTTFormatting(text) {\n    // Remove VTT tags like <v Speaker>, <c>, etc.\n    return text\n      .replace(/<[^>]+>/g, '')\n      .replace(/\\n/g, ' ')\n      .trim();\n  }\n\n  /**\n   * Show message when no transcript is available\n   */\n  showNoTranscriptMessage() {\n    const message = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-empty`,\n      textContent: i18n.t('transcript.noTranscript')\n    });\n    this.transcriptContent.appendChild(message);\n  }\n\n  /**\n   * Update active transcript entry based on current time\n   */\n  updateActiveEntry() {\n    if (!this.isVisible || this.transcriptEntries.length === 0) return;\n\n    const currentTime = this.player.state.currentTime;\n    \n    // Find the entry that matches current time\n    const activeEntry = this.transcriptEntries.find(\n      entry => currentTime >= entry.startTime && currentTime < entry.endTime\n    );\n\n    if (activeEntry && activeEntry !== this.currentActiveEntry) {\n      // Remove previous active class\n      if (this.currentActiveEntry) {\n        this.currentActiveEntry.element.classList.remove(\n          `${this.player.options.classPrefix}-transcript-entry-active`\n        );\n      }\n\n      // Add active class to current entry\n      activeEntry.element.classList.add(\n        `${this.player.options.classPrefix}-transcript-entry-active`\n      );\n      \n      // Scroll to active entry\n      this.scrollToEntry(activeEntry.element);\n      \n      this.currentActiveEntry = activeEntry;\n    } else if (!activeEntry && this.currentActiveEntry) {\n      // No active entry, remove active class\n      this.currentActiveEntry.element.classList.remove(\n        `${this.player.options.classPrefix}-transcript-entry-active`\n      );\n      this.currentActiveEntry = null;\n    }\n  }\n\n  /**\n   * Scroll transcript window to show active entry\n   */\n  scrollToEntry(entryElement) {\n    if (!this.transcriptContent || !this.autoscrollEnabled) return;\n\n    const contentRect = this.transcriptContent.getBoundingClientRect();\n    const entryRect = entryElement.getBoundingClientRect();\n\n    // Check if entry is out of view\n    if (entryRect.top < contentRect.top || entryRect.bottom > contentRect.bottom) {\n      // Scroll to center the entry\n      const scrollTop = entryElement.offsetTop - (this.transcriptContent.clientHeight / 2) + (entryElement.clientHeight / 2);\n      this.transcriptContent.scrollTo({\n        top: scrollTop,\n        behavior: 'smooth'\n      });\n    }\n  }\n  \n  /**\n   * Save autoscroll preference to localStorage\n   */\n  saveAutoscrollPreference() {\n    const savedPreferences = this.storage.getTranscriptPreferences() || {};\n    savedPreferences.autoscroll = this.autoscrollEnabled;\n    this.storage.saveTranscriptPreferences(savedPreferences);\n  }\n\n  /**\n   * Setup drag and drop functionality\n   */\n  setupDragAndDrop() {\n    if (!this.transcriptHeader || !this.transcriptWindow) return;\n\n    // Check if we're on mobile and not in fullscreen\n    const isMobile = window.innerWidth < 768;\n    const isFullscreen = this.player.state.fullscreen;\n    \n    // On mobile devices (< 768px), only enable drag/resize in fullscreen\n    // On desktop/tablets (>= 768px), always enable drag/resize\n    if (isMobile && !isFullscreen) {\n      // Destroy existing instance if exiting fullscreen on mobile\n      if (this.draggableResizable) {\n        this.draggableResizable.destroy();\n        this.draggableResizable = null;\n      }\n      return; // No drag/resize on mobile when not in fullscreen\n    }\n\n    // If already initialized, don't re-initialize\n    if (this.draggableResizable) {\n      return;\n    }\n\n    // Create DraggableResizable utility with touch support\n    this.draggableResizable = new DraggableResizable(this.transcriptWindow, {\n      dragHandle: this.transcriptHeader,\n      resizeHandles: this.transcriptResizeHandles,\n      constrainToViewport: true,\n      classPrefix: `${this.player.options.classPrefix}-transcript`,\n      keyboardDragKey: 'd',\n      keyboardResizeKey: 'r',\n      keyboardStep: 10,\n      keyboardStepLarge: 50,\n      minWidth: 300,\n      minHeight: 200,\n      maxWidth: () => Math.max(320, window.innerWidth - 40),\n      maxHeight: () => Math.max(200, window.innerHeight - 120),\n      pointerResizeIndicatorText: i18n.t('transcript.resizeModeHint'),\n      onPointerResizeToggle: (enabled) => {\n        // Update resize handles visibility\n        this.transcriptResizeHandles.forEach(handle => {\n          handle.style.display = enabled ? 'block' : 'none';\n        });\n        // Call the state change handler\n        this.onPointerResizeModeChange(enabled);\n      },\n      onDragStart: (e) => {\n        // Don't drag if clicking on certain elements\n        const ignoreSelectors = [\n          `.${this.player.options.classPrefix}-transcript-close`,\n          `.${this.player.options.classPrefix}-transcript-settings`,\n          `.${this.player.options.classPrefix}-transcript-language-select`,\n          `.${this.player.options.classPrefix}-transcript-language-label`,\n          `.${this.player.options.classPrefix}-transcript-settings-menu`,\n          `.${this.player.options.classPrefix}-transcript-style-dialog`\n        ];\n        \n        for (const selector of ignoreSelectors) {\n          if (e.target.closest(selector)) {\n            return false; // Prevent drag\n          }\n        }\n        \n        return true; // Allow drag\n      }\n    });\n\n    // Add custom keyboard handler for special keys (Escape, Home)\n    this.customKeyHandler = (e) => {\n      const key = e.key.toLowerCase();\n      const alreadyPrevented = e.defaultPrevented;\n\n      // Don't handle keys if settings menu or style dialog is open (let them handle keys)\n      if (this.settingsMenuVisible || this.styleDialogVisible) {\n        return;\n      }\n\n      if (key === 'home') {\n        e.preventDefault();\n        e.stopPropagation();\n        if (this.draggableResizable) {\n          if (this.draggableResizable.pointerResizeMode) {\n            this.draggableResizable.disablePointerResizeMode();\n          }\n          this.draggableResizable.manuallyPositioned = false;\n          this.positionTranscript();\n          this.updateResizeOptionState();\n          this.announceLive(i18n.t('transcript.positionReset'));\n        }\n        return;\n      }\n      \n      if (key === 'r') {\n        if (alreadyPrevented) {\n          return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        const enabled = this.toggleResizeMode();\n        if (enabled) {\n          this.transcriptWindow.focus({ preventScroll: true });\n        }\n        return;\n      }\n      \n      if (key === 'escape') {\n        // Check priority: resize mode > drag mode > close transcript\n        // (settings menu and style dialog already handled by early return above)\n        if (this.draggableResizable && this.draggableResizable.pointerResizeMode) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.draggableResizable.disablePointerResizeMode();\n          return;\n        }\n        if (this.draggableResizable && this.draggableResizable.keyboardDragMode) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.draggableResizable.disableKeyboardDragMode();\n          this.announceLive(i18n.t('transcript.dragModeDisabled'));\n          return;\n        }\n        // Only close transcript if nothing else is open\n        e.preventDefault();\n        e.stopPropagation();\n        this.hideTranscript({ focusButton: true });\n        return;\n      }\n    };\n    \n    this.transcriptWindow.addEventListener('keydown', this.customKeyHandler);\n  }\n\n\n  /**\n   * Toggle keyboard drag mode\n   */\n  toggleKeyboardDragMode() {\n    if (this.draggableResizable) {\n      const wasEnabled = this.draggableResizable.keyboardDragMode;\n      this.draggableResizable.toggleKeyboardDragMode();\n      const isEnabled = this.draggableResizable.keyboardDragMode;\n      if (!wasEnabled && isEnabled) {\n        this.enableMoveMode();\n      }\n      \n      // Update drag option state\n      this.updateDragOptionState();\n      \n      // Hide settings menu if open\n      if (this.settingsMenuVisible) {\n        this.hideSettingsMenu();\n      }\n      \n      // Focus the window for keyboard navigation\n      this.transcriptWindow.focus({ preventScroll: true });\n    }\n  }\n\n  /**\n   * Toggle settings menu visibility\n   */\n  toggleSettingsMenu() {\n    if (this.settingsMenuVisible) {\n      this.hideSettingsMenu();\n    } else {\n      this.showSettingsMenu();\n    }\n  }\n\n  /**\n   * Show settings menu\n   */\n  showSettingsMenu() {\n    // Set flag to prevent immediate closing\n    this.settingsMenuJustOpened = true;\n    setTimeout(() => {\n      this.settingsMenuJustOpened = false;\n    }, 350);\n    \n    // Add document click handler on FIRST menu open (not at window creation)\n    if (!this.documentClickHandlerAdded) {\n      setTimeout(() => {\n        document.addEventListener('click', this.handlers.documentClick);\n        this.documentClickHandlerAdded = true;\n      }, 300);\n    }\n    \n    if (this.settingsMenu) {\n      this.settingsMenu.style.display = 'block';\n      this.settingsMenuVisible = true;\n      if (this.settingsButton) {\n        this.settingsButton.setAttribute('aria-expanded', 'true');\n      }\n      // Re-attach keyboard navigation handler\n      this.attachSettingsMenuKeyboardNavigation();\n      // Position menu immediately\n      this.positionSettingsMenuImmediate();\n      this.updateResizeOptionState();\n      // Focus first menu item after positioning\n      setTimeout(() => {\n        const menuItems = this.settingsMenu.querySelectorAll(`.${this.player.options.classPrefix}-transcript-settings-item`);\n        if (menuItems.length > 0) {\n          menuItems[0].setAttribute('tabindex', '0');\n          for (let i = 1; i < menuItems.length; i++) {\n            menuItems[i].setAttribute('tabindex', '-1');\n          }\n          menuItems[0].focus({ preventScroll: true });\n        }\n      }, 50);\n      return;\n    }\n    // Create settings menu\n    this.settingsMenu = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-settings-menu`,\n      attributes: {\n        'role': 'menu'\n      }\n    });\n\n    // Keyboard drag option\n    const keyboardDragOption = createMenuItem({\n      classPrefix: this.player.options.classPrefix,\n      itemClass: `${this.player.options.classPrefix}-transcript-settings-item`,\n      icon: 'move',\n      label: 'transcript.enableDragMode',\n      hasTextClass: true,\n      onClick: () => {\n        this.toggleKeyboardDragMode();\n        this.hideSettingsMenu();\n      }\n    });\n    keyboardDragOption.setAttribute('role', 'switch');\n    keyboardDragOption.setAttribute('aria-checked', 'false');\n    // Remove any tooltips from menu items (they have visible text)\n    const dragTooltip = keyboardDragOption.querySelector(`.${this.player.options.classPrefix}-tooltip`);\n    if (dragTooltip) dragTooltip.remove();\n    const dragButtonText = keyboardDragOption.querySelector(`.${this.player.options.classPrefix}-button-text`);\n    if (dragButtonText) dragButtonText.remove();\n    this.dragOptionButton = keyboardDragOption;\n    this.dragOptionText = keyboardDragOption.querySelector(`.${this.player.options.classPrefix}-settings-text`);\n    this.updateDragOptionState();\n    \n    // Style option\n    const styleOption = createMenuItem({\n      classPrefix: this.player.options.classPrefix,\n      itemClass: `${this.player.options.classPrefix}-transcript-settings-item`,\n      icon: 'settings',\n      label: 'transcript.styleTranscript',\n      onClick: (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.hideSettingsMenu();\n        // Delay to ensure menu is fully closed before opening dialog\n        setTimeout(() => {\n          this.showStyleDialog();\n        }, 50);\n      }\n    });\n    // Remove any tooltips from menu items (they have visible text)\n    const styleTooltip = styleOption.querySelector(`.${this.player.options.classPrefix}-tooltip`);\n    if (styleTooltip) styleTooltip.remove();\n    const styleButtonText = styleOption.querySelector(`.${this.player.options.classPrefix}-button-text`);\n    if (styleButtonText) styleButtonText.remove();\n\n    // Resize option\n    const resizeOption = createMenuItem({\n      classPrefix: this.player.options.classPrefix,\n      itemClass: `${this.player.options.classPrefix}-transcript-settings-item`,\n      icon: 'resize',\n      label: 'transcript.enableResizeMode',\n      hasTextClass: true,\n      onClick: (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        const enabled = this.toggleResizeMode({ focus: false });\n        \n        if (enabled) {\n          this.hideSettingsMenu({ focusButton: false });\n          // Focus transcript window after handles appear\n          setTimeout(() => {\n            if (this.transcriptWindow) {\n              this.transcriptWindow.focus({ preventScroll: true });\n            }\n          }, 20);\n        } else {\n          this.hideSettingsMenu({ focusButton: true });\n        }\n      }\n    });\n    resizeOption.setAttribute('role', 'switch');\n    resizeOption.setAttribute('aria-checked', 'false');\n    // Remove any tooltips from menu items (they have visible text)\n    const resizeTooltip = resizeOption.querySelector(`.${this.player.options.classPrefix}-tooltip`);\n    if (resizeTooltip) resizeTooltip.remove();\n    const resizeButtonText = resizeOption.querySelector(`.${this.player.options.classPrefix}-button-text`);\n    if (resizeButtonText) resizeButtonText.remove();\n    this.resizeOptionButton = resizeOption;\n    this.resizeOptionText = resizeOption.querySelector(`.${this.player.options.classPrefix}-settings-text`);\n    this.updateResizeOptionState();\n\n    // Show timestamps option\n    const showTimestampsOption = createMenuItem({\n      classPrefix: this.player.options.classPrefix,\n      itemClass: `${this.player.options.classPrefix}-transcript-settings-item`,\n      icon: 'clock',\n      label: 'transcript.showTimestamps',\n      hasTextClass: true,\n      onClick: () => {\n        this.toggleShowTimestamps();\n      }\n    });\n    showTimestampsOption.setAttribute('role', 'switch');\n    showTimestampsOption.setAttribute('aria-checked', this.showTimestamps ? 'true' : 'false');\n    // Remove any tooltips from menu items (they have visible text)\n    const timestampsTooltip = showTimestampsOption.querySelector(`.${this.player.options.classPrefix}-tooltip`);\n    if (timestampsTooltip) timestampsTooltip.remove();\n    const timestampsButtonText = showTimestampsOption.querySelector(`.${this.player.options.classPrefix}-button-text`);\n    if (timestampsButtonText) timestampsButtonText.remove();\n    this.showTimestampsButton = showTimestampsOption;\n    this.showTimestampsText = showTimestampsOption.querySelector(`.${this.player.options.classPrefix}-settings-text`);\n    this.updateShowTimestampsState();\n\n    // Close option\n    const closeOption = createMenuItem({\n      classPrefix: this.player.options.classPrefix,\n      itemClass: `${this.player.options.classPrefix}-transcript-settings-item`,\n      icon: 'close',\n      label: 'transcript.closeMenu',\n      onClick: () => {\n        this.hideSettingsMenu();\n      }\n    });\n    // Remove any tooltips from menu items (they have visible text)\n    const closeTooltip = closeOption.querySelector(`.${this.player.options.classPrefix}-tooltip`);\n    if (closeTooltip) closeTooltip.remove();\n    const closeButtonText = closeOption.querySelector(`.${this.player.options.classPrefix}-button-text`);\n    if (closeButtonText) closeButtonText.remove();\n\n    this.settingsMenu.appendChild(keyboardDragOption);\n    this.settingsMenu.appendChild(resizeOption);\n    this.settingsMenu.appendChild(styleOption);\n    this.settingsMenu.appendChild(showTimestampsOption);\n    this.settingsMenu.appendChild(closeOption);\n\n    // Position menu first (before it's visible) to prevent jumping\n    // Set menu to invisible temporarily\n    this.settingsMenu.style.visibility = 'hidden';\n    this.settingsMenu.style.display = 'block';\n    \n    // Insert menu right after settings button for proper positioning\n    if (this.settingsButton && this.settingsButton.parentNode) {\n      this.settingsButton.insertAdjacentElement('afterend', this.settingsMenu);\n    } else if (this.headerLeft) {\n      this.headerLeft.appendChild(this.settingsMenu);\n    } else if (this.transcriptHeader) {\n      this.transcriptHeader.appendChild(this.settingsMenu);\n    } else {\n      this.transcriptWindow.appendChild(this.settingsMenu);\n    }\n    \n    // Position the menu relative to the settings button (immediately while hidden)\n    this.positionSettingsMenuImmediate();\n    \n    // Make menu visible after positioning\n    requestAnimationFrame(() => {\n      if (this.settingsMenu) {\n        this.settingsMenu.style.visibility = 'visible';\n      }\n    });\n    \n    // Add keyboard navigation\n    this.settingsMenuKeyHandler = attachMenuKeyboardNavigation(\n      this.settingsMenu,\n      this.settingsButton,\n      `.${this.player.options.classPrefix}-transcript-settings-item`,\n      () => this.hideSettingsMenu({ focusButton: true })\n    );\n    \n    // Set the menu as visible and display it\n    this.settingsMenuVisible = true;\n    this.settingsMenu.style.display = 'block';\n    \n    // Update aria-expanded\n    if (this.settingsButton) {\n      this.settingsButton.setAttribute('aria-expanded', 'true');\n    }\n    this.updateResizeOptionState();\n    \n    // Focus first menu item after visibility is set\n    setTimeout(() => {\n      const menuItems = this.settingsMenu.querySelectorAll(`.${this.player.options.classPrefix}-transcript-settings-item`);\n      if (menuItems.length > 0) {\n        menuItems[0].setAttribute('tabindex', '0');\n        for (let i = 1; i < menuItems.length; i++) {\n          menuItems[i].setAttribute('tabindex', '-1');\n        }\n        menuItems[0].focus({ preventScroll: true });\n      }\n    }, 50);\n  }\n\n  /**\n   * Position settings menu relative to settings button (immediate/synchronous)\n   */\n  positionSettingsMenuImmediate() {\n    if (!this.settingsMenu || !this.settingsButton) return;\n    \n    // Get the parent container (header-left) which has position: relative\n    const container = this.settingsButton.parentElement;\n    if (!container) return;\n    \n    // Position immediately (synchronously) - used when menu is first shown\n    const buttonRect = this.settingsButton.getBoundingClientRect();\n    const containerRect = container.getBoundingClientRect();\n    const menuRect = this.settingsMenu.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n    \n    // Calculate position relative to the container\n    const buttonLeft = buttonRect.left - containerRect.left;\n    const buttonBottom = buttonRect.bottom - containerRect.top;\n    const buttonTop = buttonRect.top - containerRect.top;\n    \n    const spaceBelow = viewportHeight - buttonRect.bottom;\n    const spaceAbove = buttonRect.top;\n    \n    // Position menu below button by default (left-aligned with button)\n    let menuTop = buttonBottom + 4;\n    \n    // Check if we should position above instead\n    if (spaceBelow < menuRect.height + 20 && spaceAbove > spaceBelow) {\n      // Position above the button\n      menuTop = buttonTop - menuRect.height - 4;\n      this.settingsMenu.classList.add('vidply-menu-above');\n    } else {\n      this.settingsMenu.classList.remove('vidply-menu-above');\n    }\n    \n    // Apply positions (left-aligned with button)\n    this.settingsMenu.style.top = `${menuTop}px`;\n    this.settingsMenu.style.left = `${buttonLeft}px`;\n    this.settingsMenu.style.right = 'auto';\n    this.settingsMenu.style.bottom = 'auto';\n  }\n  \n  /**\n   * Position settings menu relative to settings button (async for repositioning)\n   */\n  positionSettingsMenu() {\n    if (!this.settingsMenu || !this.settingsButton) return;\n    \n    // Use requestAnimationFrame to ensure layout is stable before positioning (for repositioning)\n    requestAnimationFrame(() => {\n      setTimeout(() => {\n        this.positionSettingsMenuImmediate();\n      }, 10); // Small delay to ensure layout is stable\n    });\n  }\n\n  /**\n   * Attach keyboard navigation to settings menu\n   */\n  attachSettingsMenuKeyboardNavigation() {\n    if (!this.settingsMenu) return;\n    \n    // Remove existing handler if any\n    if (this.settingsMenuKeyHandler) {\n      this.settingsMenu.removeEventListener('keydown', this.settingsMenuKeyHandler, true);\n    }\n    \n    const handler = attachMenuKeyboardNavigation(\n      this.settingsMenu,\n      this.settingsButton,\n      `.${this.player.options.classPrefix}-transcript-settings-item`,\n      () => this.hideSettingsMenu({ focusButton: true })\n    );\n    \n    // Store the handler reference\n    this.settingsMenuKeyHandler = handler;\n    \n  }\n\n  /**\n   * Hide settings menu\n   */\n  hideSettingsMenu({ focusButton = true } = {}) {\n    if (this.settingsMenu) {\n      this.settingsMenu.style.display = 'none';\n      this.settingsMenuVisible = false;\n      this.settingsMenuJustOpened = false;\n      \n      // Remove keyboard handler to prevent duplicate listeners\n      if (this.settingsMenuKeyHandler) {\n        this.settingsMenu.removeEventListener('keydown', this.settingsMenuKeyHandler, true);\n        this.settingsMenuKeyHandler = null;\n      }\n      \n      // Update aria-expanded\n      if (this.settingsButton) {\n        this.settingsButton.setAttribute('aria-expanded', 'false');\n        if (focusButton) {\n          // Return focus to settings button\n          this.settingsButton.focus({ preventScroll: true });\n        }\n      }\n    }\n  }\n\n  /**\n   * Enable move mode (gives visual feedback)\n   */\n  enableMoveMode() {\n    this.hideResizeModeIndicator();\n\n    // Add visual feedback for move mode\n    this.transcriptWindow.classList.add(`${this.player.options.classPrefix}-transcript-move-mode`);\n    \n    // Show tooltip about keyboard drag option\n    const tooltip = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-move-tooltip`,\n      textContent: 'Drag with mouse or press D for keyboard drag mode'\n    });\n    this.transcriptHeader.appendChild(tooltip);\n    \n    // Remove after 2 seconds\n    setTimeout(() => {\n      this.transcriptWindow.classList.remove(`${this.player.options.classPrefix}-transcript-move-mode`);\n      if (tooltip.parentNode) {\n        tooltip.remove();\n      }\n    }, 2000);\n  }\n\n  /**\n   * Toggle resize mode\n   */\n  toggleResizeMode({ focus = true } = {}) {\n    if (!this.draggableResizable) {\n      return false;\n    }\n\n    if (this.draggableResizable.pointerResizeMode) {\n      this.draggableResizable.disablePointerResizeMode({ focus });\n      return false;\n    }\n\n    this.draggableResizable.enablePointerResizeMode({ focus });\n    return true;\n  }\n\n  updateDragOptionState() {\n    if (!this.dragOptionButton) {\n      return;\n    }\n    \n    const isEnabled = !!(this.draggableResizable && this.draggableResizable.keyboardDragMode);\n    const text = isEnabled\n      ? i18n.t('transcript.disableDragMode')\n      : i18n.t('transcript.enableDragMode');\n    const ariaLabel = isEnabled\n      ? i18n.t('transcript.disableDragModeAria')\n      : i18n.t('transcript.enableDragModeAria');\n\n    this.dragOptionButton.setAttribute('aria-checked', isEnabled ? 'true' : 'false');\n    this.dragOptionButton.setAttribute('aria-label', ariaLabel);\n\n    if (this.dragOptionText) {\n      this.dragOptionText.textContent = text;\n    }\n  }\n\n  updateResizeOptionState() {\n    if (!this.resizeOptionButton) {\n      return;\n    }\n    \n    const isEnabled = !!(this.draggableResizable && this.draggableResizable.pointerResizeMode);\n    const text = isEnabled\n      ? i18n.t('transcript.disableResizeMode')\n      : i18n.t('transcript.enableResizeMode');\n    const ariaLabel = isEnabled\n      ? i18n.t('transcript.disableResizeModeAria')\n      : i18n.t('transcript.enableResizeModeAria');\n\n    this.resizeOptionButton.setAttribute('aria-checked', isEnabled ? 'true' : 'false');\n    this.resizeOptionButton.setAttribute('aria-label', ariaLabel);\n\n    if (this.resizeOptionText) {\n      this.resizeOptionText.textContent = text;\n    }\n  }\n\n  toggleShowTimestamps() {\n    this.showTimestamps = !this.showTimestamps;\n    this.updateShowTimestampsState();\n    this.updateTimestampVisibility();\n    this.saveTimestampsPreference();\n  }\n\n  updateShowTimestampsState() {\n    if (!this.showTimestampsButton) {\n      return;\n    }\n    \n    const text = this.showTimestamps\n      ? i18n.t('transcript.hideTimestamps')\n      : i18n.t('transcript.showTimestamps');\n    const ariaLabel = this.showTimestamps\n      ? i18n.t('transcript.hideTimestampsAria')\n      : i18n.t('transcript.showTimestampsAria');\n\n    this.showTimestampsButton.setAttribute('aria-checked', this.showTimestamps ? 'true' : 'false');\n    this.showTimestampsButton.setAttribute('aria-label', ariaLabel);\n\n    if (this.showTimestampsText) {\n      this.showTimestampsText.textContent = text;\n    }\n  }\n\n  updateTimestampVisibility() {\n    if (!this.transcriptContent) return;\n    \n    const timestamps = this.transcriptContent.querySelectorAll(`.${this.player.options.classPrefix}-transcript-time`);\n    timestamps.forEach(timestamp => {\n      timestamp.style.display = this.showTimestamps ? '' : 'none';\n    });\n  }\n\n  saveTimestampsPreference() {\n    const savedPreferences = this.storage.getTranscriptPreferences() || {};\n    savedPreferences.showTimestamps = this.showTimestamps;\n    this.storage.saveTranscriptPreferences(savedPreferences);\n  }\n\n  showResizeModeIndicator() {\n    if (!this.transcriptHeader) {\n      return;\n    }\n\n    this.hideResizeModeIndicator();\n\n    const indicator = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-resize-tooltip`,\n      textContent: i18n.t('transcript.resizeModeHint') || 'Resize handles enabled. Drag edges or corners to adjust. Press Esc or R to exit.'\n    });\n\n    this.transcriptHeader.appendChild(indicator);\n    this.resizeModeIndicator = indicator;\n\n    this.resizeModeIndicatorTimeout = this.setManagedTimeout(() => {\n      this.hideResizeModeIndicator();\n    }, 3000);\n  }\n\n  hideResizeModeIndicator() {\n    if (this.resizeModeIndicatorTimeout) {\n      this.clearManagedTimeout(this.resizeModeIndicatorTimeout);\n      this.resizeModeIndicatorTimeout = null;\n    }\n\n    if (this.resizeModeIndicator && this.resizeModeIndicator.parentNode) {\n      this.resizeModeIndicator.remove();\n    }\n\n    this.resizeModeIndicator = null;\n  }\n\n  onPointerResizeModeChange(enabled) {\n    this.updateResizeOptionState();\n\n    if (enabled) {\n      this.showResizeModeIndicator();\n      this.announceLive(i18n.t('transcript.resizeModeEnabled'));\n    } else {\n      this.hideResizeModeIndicator();\n      this.announceLive(i18n.t('transcript.resizeModeDisabled'));\n    }\n  }\n\n  /**\n   * Show style dialog\n   */\n  showStyleDialog() {\n    // If dialog already exists, just show it\n    if (this.styleDialog) {\n      this.styleDialog.style.display = 'block';\n      this.styleDialogVisible = true;\n      \n      // Re-add keyboard handler\n      if (this.handlers.styleDialogKeydown) {\n        document.addEventListener('keydown', this.handlers.styleDialogKeydown);\n      }\n      \n      // Set flag to prevent immediate closing from document click\n      this.styleDialogJustOpened = true;\n      setTimeout(() => {\n        this.styleDialogJustOpened = false;\n      }, 350);\n      \n      // Focus first control\n      setTimeout(() => {\n        const firstSelect = this.styleDialog.querySelector('select, input');\n        if (firstSelect) {\n          firstSelect.focus({ preventScroll: true });\n        }\n      }, 0);\n      return;\n    }\n\n    // Create style dialog\n    this.styleDialog = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-style-dialog`\n    });\n\n    // Dialog title\n    const title = DOMUtils.createElement('h4', {\n      textContent: i18n.t('transcript.styleTitle'),\n      className: `${this.player.options.classPrefix}-transcript-style-title`\n    });\n    this.styleDialog.appendChild(title);\n\n    // Font Size\n    const fontSizeControl = this.createStyleSelectControl(\n      i18n.t('captions.fontSize'),\n      'fontSize',\n      [\n        { label: i18n.t('fontSizes.small'), value: '90%' },\n        { label: i18n.t('fontSizes.normal'), value: '100%' },\n        { label: i18n.t('fontSizes.large'), value: '110%' },\n        { label: i18n.t('fontSizes.xlarge'), value: '120%' }\n      ]\n    );\n    this.styleDialog.appendChild(fontSizeControl);\n\n    // Font Family\n    const fontFamilyControl = this.createStyleSelectControl(\n      i18n.t('captions.fontFamily'),\n      'fontFamily',\n      [\n        { label: i18n.t('fontFamilies.sansSerif'), value: 'sans-serif' },\n        { label: i18n.t('fontFamilies.serif'), value: 'serif' },\n        { label: i18n.t('fontFamilies.monospace'), value: 'monospace' }\n      ]\n    );\n    this.styleDialog.appendChild(fontFamilyControl);\n\n    // Text Color\n    const colorControl = this.createStyleColorControl(i18n.t('captions.color'), 'color');\n    this.styleDialog.appendChild(colorControl);\n\n    // Background Color\n    const bgColorControl = this.createStyleColorControl(i18n.t('captions.backgroundColor'), 'backgroundColor');\n    this.styleDialog.appendChild(bgColorControl);\n\n    // Opacity\n    const opacityControl = this.createStyleOpacityControl(i18n.t('captions.opacity'), 'opacity');\n    this.styleDialog.appendChild(opacityControl);\n\n    // Close button\n    const closeBtn = DOMUtils.createElement('button', {\n      className: `${this.player.options.classPrefix}-transcript-style-close`,\n      textContent: i18n.t('settings.close'),\n      attributes: {\n        'type': 'button'\n      }\n    });\n    closeBtn.addEventListener('click', () => this.hideStyleDialog());\n    this.styleDialog.appendChild(closeBtn);\n\n    // Keyboard navigation for style dialog\n    this.handlers.styleDialogKeydown = (e) => {\n      // Only handle keys when dialog is visible\n      if (!this.styleDialogVisible) return;\n      \n      // ESC to close\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        e.stopPropagation();\n        this.hideStyleDialog();\n        return;\n      }\n      \n      // Tab navigation (allow default behavior but trap focus)\n      if (e.key === 'Tab') {\n        // Get all focusable elements\n        const focusableElements = this.styleDialog.querySelectorAll(\n          'select, input, button'\n        );\n        const firstElement = focusableElements[0];\n        const lastElement = focusableElements[focusableElements.length - 1];\n        \n        // Trap focus within dialog\n        if (e.shiftKey && document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement.focus({ preventScroll: true });\n        } else if (!e.shiftKey && document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement.focus({ preventScroll: true });\n        }\n      }\n    };\n    document.addEventListener('keydown', this.handlers.styleDialogKeydown);\n\n    // Append to header left container (same as settings menu) for correct positioning\n    if (this.headerLeft) {\n      this.headerLeft.appendChild(this.styleDialog);\n    } else {\n      this.transcriptHeader.appendChild(this.styleDialog);\n    }\n    \n    // Apply current styles\n    this.applyTranscriptStyles();\n    \n    // Important: Set visible state and display before focusing\n    this.styleDialogVisible = true;\n    this.styleDialog.style.display = 'block';\n    \n    // Set flag to prevent immediate closing from document click\n    this.styleDialogJustOpened = true;\n    setTimeout(() => {\n      this.styleDialogJustOpened = false;\n    }, 350);\n    \n    // Focus first control for keyboard accessibility\n    setTimeout(() => {\n      const firstSelect = this.styleDialog.querySelector('select, input');\n      if (firstSelect) {\n        firstSelect.focus({ preventScroll: true });\n      }\n    }, 0);\n  }\n\n  /**\n   * Hide style dialog\n   */\n  hideStyleDialog() {\n    if (this.styleDialog) {\n      this.styleDialog.style.display = 'none';\n      this.styleDialogVisible = false;\n      \n      // Remove keyboard handler\n      if (this.handlers.styleDialogKeydown) {\n        document.removeEventListener('keydown', this.handlers.styleDialogKeydown);\n      }\n      \n      // Return focus to settings button\n      if (this.settingsButton) {\n        this.settingsButton.focus({ preventScroll: true });\n      }\n    }\n  }\n\n  /**\n   * Create style select control\n   */\n  createStyleSelectControl(label, property, options) {\n    const group = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-style-group`\n    });\n\n    // Generate unique ID for the control\n    const controlId = `${this.player.options.classPrefix}-transcript-${property}-${Date.now()}`;\n\n    const labelEl = DOMUtils.createElement('label', {\n      textContent: label,\n      attributes: {\n        'for': controlId\n      }\n    });\n    group.appendChild(labelEl);\n\n    const select = DOMUtils.createElement('select', {\n      className: `${this.player.options.classPrefix}-transcript-style-select`,\n      attributes: {\n        'id': controlId\n      }\n    });\n\n    options.forEach(opt => {\n      const option = DOMUtils.createElement('option', {\n        textContent: opt.label,\n        attributes: {\n          'value': opt.value\n        }\n      });\n      if (this.transcriptStyle[property] === opt.value) {\n        option.selected = true;\n      }\n      select.appendChild(option);\n    });\n\n    select.addEventListener('change', (e) => {\n      this.transcriptStyle[property] = e.target.value;\n      this.applyTranscriptStyles();\n      this.savePreferences();\n    });\n\n    group.appendChild(select);\n    return group;\n  }\n\n  /**\n   * Create style color control\n   */\n  createStyleColorControl(label, property) {\n    const group = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-style-group`\n    });\n\n    // Generate unique ID for the control\n    const controlId = `${this.player.options.classPrefix}-transcript-${property}-${Date.now()}`;\n\n    const labelEl = DOMUtils.createElement('label', {\n      textContent: label,\n      attributes: {\n        'for': controlId\n      }\n    });\n    group.appendChild(labelEl);\n\n    const input = DOMUtils.createElement('input', {\n      attributes: {\n        'id': controlId,\n        'type': 'color',\n        'value': this.transcriptStyle[property]\n      },\n      className: `${this.player.options.classPrefix}-transcript-style-color`\n    });\n\n    input.addEventListener('input', (e) => {\n      this.transcriptStyle[property] = e.target.value;\n      this.applyTranscriptStyles();\n      this.savePreferences();\n    });\n\n    group.appendChild(input);\n    return group;\n  }\n\n  /**\n   * Create style opacity control\n   */\n  createStyleOpacityControl(label, property) {\n    const group = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-style-group`\n    });\n\n    // Generate unique ID for the control\n    const controlId = `${this.player.options.classPrefix}-transcript-${property}-${Date.now()}`;\n\n    const labelEl = DOMUtils.createElement('label', {\n      textContent: label,\n      attributes: {\n        'for': controlId\n      }\n    });\n    group.appendChild(labelEl);\n\n    const valueDisplay = DOMUtils.createElement('span', {\n      textContent: Math.round(this.transcriptStyle[property] * 100) + '%',\n      className: `${this.player.options.classPrefix}-transcript-style-value`\n    });\n\n    const input = DOMUtils.createElement('input', {\n      attributes: {\n        'id': controlId,\n        'type': 'range',\n        'min': '0',\n        'max': '1',\n        'step': '0.1',\n        'value': String(this.transcriptStyle[property])\n      },\n      className: `${this.player.options.classPrefix}-transcript-style-range`\n    });\n\n    input.addEventListener('input', (e) => {\n      const value = parseFloat(e.target.value);\n      this.transcriptStyle[property] = value;\n      valueDisplay.textContent = Math.round(value * 100) + '%';\n      this.applyTranscriptStyles();\n      this.savePreferences();\n    });\n\n    const inputContainer = DOMUtils.createElement('div', {\n      className: `${this.player.options.classPrefix}-transcript-style-range-container`\n    });\n    inputContainer.appendChild(input);\n    inputContainer.appendChild(valueDisplay);\n\n    group.appendChild(labelEl);\n    group.appendChild(inputContainer);\n    return group;\n  }\n\n  /**\n   * Save transcript preferences to localStorage\n   */\n  savePreferences() {\n    this.storage.saveTranscriptPreferences(this.transcriptStyle);\n  }\n\n  /**\n   * Apply transcript styles\n   */\n  applyTranscriptStyles() {\n    if (!this.transcriptWindow) return;\n\n    // Apply to transcript window background\n    this.transcriptWindow.style.backgroundColor = this.transcriptStyle.backgroundColor;\n    this.transcriptWindow.style.opacity = String(this.transcriptStyle.opacity);\n\n    // Apply to content area\n    if (this.transcriptContent) {\n      this.transcriptContent.style.fontSize = this.transcriptStyle.fontSize;\n      this.transcriptContent.style.fontFamily = this.transcriptStyle.fontFamily;\n      this.transcriptContent.style.color = this.transcriptStyle.color;\n    }\n\n    // Apply to all text entries (important: override CSS defaults)\n    const textEntries = this.transcriptWindow.querySelectorAll(`.${this.player.options.classPrefix}-transcript-text`);\n    textEntries.forEach(entry => {\n      entry.style.fontSize = this.transcriptStyle.fontSize;\n      entry.style.fontFamily = this.transcriptStyle.fontFamily;\n      entry.style.color = this.transcriptStyle.color;\n    });\n    \n    // Apply to timestamp entries as well\n    const timeEntries = this.transcriptWindow.querySelectorAll(`.${this.player.options.classPrefix}-transcript-time`);\n    timeEntries.forEach(entry => {\n      entry.style.fontFamily = this.transcriptStyle.fontFamily;\n    });\n  }\n\n  /**\n   * Set a managed timeout that will be cleaned up on destroy\n   * @param {Function} callback - Callback function\n   * @param {number} delay - Delay in milliseconds\n   * @returns {number} Timeout ID\n   */\n  setManagedTimeout(callback, delay) {\n    const timeoutId = setTimeout(() => {\n      this.timeouts.delete(timeoutId);\n      callback();\n    }, delay);\n    this.timeouts.add(timeoutId);\n    return timeoutId;\n  }\n\n  /**\n   * Clear a managed timeout\n   * @param {number} timeoutId - Timeout ID to clear\n   */\n  clearManagedTimeout(timeoutId) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      this.timeouts.delete(timeoutId);\n    }\n  }\n\n  /**\n   * Cleanup\n   */\n  destroy() {\n    this.hideResizeModeIndicator();\n    \n    // Destroy draggableResizable utility\n    if (this.draggableResizable) {\n      if (this.draggableResizable.pointerResizeMode) {\n        this.draggableResizable.disablePointerResizeMode();\n        this.updateResizeOptionState();\n      }\n      this.draggableResizable.destroy();\n      this.draggableResizable = null;\n    }\n    \n    // Remove custom key handler\n    if (this.transcriptWindow && this.customKeyHandler) {\n      this.transcriptWindow.removeEventListener('keydown', this.customKeyHandler);\n      this.customKeyHandler = null;\n    }\n\n    // Remove timeupdate listener from player\n    if (this.handlers.timeupdate) {\n      this.player.off('timeupdate', this.handlers.timeupdate);\n    }\n    \n    // Remove audio description listeners from player\n    if (this.handlers.audiodescriptionenabled) {\n      this.player.off('audiodescriptionenabled', this.handlers.audiodescriptionenabled);\n    }\n    if (this.handlers.audiodescriptiondisabled) {\n      this.player.off('audiodescriptiondisabled', this.handlers.audiodescriptiondisabled);\n    }\n    \n    // Remove settings button event listeners\n    if (this.settingsButton) {\n      if (this.handlers.settingsClick) {\n        this.settingsButton.removeEventListener('click', this.handlers.settingsClick);\n      }\n      if (this.handlers.settingsKeydown) {\n        this.settingsButton.removeEventListener('keydown', this.handlers.settingsKeydown);\n      }\n    }\n    \n    // Remove style dialog event listeners\n    if (this.handlers.styleDialogKeydown) {\n      document.removeEventListener('keydown', this.handlers.styleDialogKeydown);\n    }\n\n    // Remove document click listener\n    if (this.handlers.documentClick) {\n      document.removeEventListener('click', this.handlers.documentClick);\n    }\n    \n    // Remove window-level listeners\n    if (this.handlers.resize) {\n      window.removeEventListener('resize', this.handlers.resize);\n    }\n\n    // Cleanup all managed timeouts\n    this.timeouts.forEach(timeoutId => clearTimeout(timeoutId));\n    this.timeouts.clear();\n\n    // Clear handlers\n    this.handlers = null;\n\n    // Remove DOM element\n    if (this.transcriptWindow && this.transcriptWindow.parentNode) {\n      this.transcriptWindow.parentNode.removeChild(this.transcriptWindow);\n    }\n    \n    this.transcriptWindow = null;\n    this.transcriptHeader = null;\n    this.transcriptContent = null;\n    this.transcriptEntries = [];\n    this.settingsMenu = null;\n    this.styleDialog = null;\n    this.transcriptResizeHandles = [];\n    this.resizeOptionButton = null;\n    this.resizeOptionText = null;\n    this.liveRegion = null;\n  }\n\n  announceLive(message) {\n    if (!this.liveRegion) return;\n    this.liveRegion.textContent = message || '';\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
